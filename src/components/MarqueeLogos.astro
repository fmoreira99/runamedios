---
const {
  title = 'Marcas que confían',
  logos = [],
  speed = 25,          // segundos por vuelta
  pauseOnHover = true, // pausa al pasar el mouse
} = Astro.props;

const hasLogos = Array.isArray(logos) && logos.length > 0;
// Duplicamos para loop continuo
const stream = hasLogos ? [...logos, ...logos] : [];
---

{hasLogos && (
  <section class="marquee">
    <header class="head">
      <h2>{title}</h2>
      <p>Desliza para ver más</p>
    </header>

    <div class={`rail ${pauseOnHover ? 'pausable' : ''}`} style={`--speed:${speed}s`}>
      <div class="track">
        {stream.map((l) => (
          <figure class="logo-card" aria-label={l.alt ?? 'logo'}>
            <img src={l.src} alt={l.alt ?? 'logo'} loading="lazy" />
          </figure>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  .marquee {
    background: linear-gradient(135deg, var(--bg), #0b1224);
    border: 1px solid #1f2a44;
    border-radius: 16px;
    padding: 28px 16px;
    overflow: hidden;
  }
  .head {
    display: flex;
    align-items: end;
    justify-content: space-between;
    gap: 12px;
    padding: 0 8px 14px;
    border-bottom: 1px dashed #263155;
    margin-bottom: 14px;
  }
  .head h2 { margin: 0; font-size: 20px; font-weight: 800; color: var(--text); }
  .head p { margin: 0; color: var(--muted); font-size: 13px; }

  .rail { overflow: hidden; position: relative; }
  .track {
    display: flex;
    width: max-content;
    gap: 20px;
    animation: scroll var(--speed, 25s) linear infinite;
  }
  .pausable:hover .track { animation-play-state: paused; }

  @keyframes scroll {
    from { transform: translateX(0); }
    to   { transform: translateX(-50%); }
  }

  .logo-card {
    min-width: 200px;
    height: 96px;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 12px;
    padding: 16px;
    position: relative;
    overflow: hidden;
    transition: transform .25s ease, background .25s ease, box-shadow .25s ease;
  }
  .logo-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent, rgba(255,255,255,.06), transparent);
    opacity: 0;
    transition: opacity .25s ease;
  }
  .logo-card:hover {
    transform: translateY(-4px) scale(1.02);
    background: rgba(255,255,255,0.08);
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  .logo-card:hover::before { opacity: 1; }

  .logo-card img {
    max-height: 58px;
    width: auto;
    object-fit: contain;
    filter: brightness(0) invert(1);
    opacity: .95;
  }

  @media (max-width: 820px) {
    .logo-card { min-width: 150px; height: 82px; }
    .head h2 { font-size: 18px; }
  }
</style>

