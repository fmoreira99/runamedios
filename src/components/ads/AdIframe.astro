---
const { adKey, width, height, className = "" } = Astro.props as {
  adKey: string; width: number; height: number; className?: string;
};
const uid = `ad_${adKey}_${Math.random().toString(36).slice(2)}`;
---
<div id={uid} class={`ad-box ${className}`} style={`width:${width}px;max-width:100%`}>
  <div style={`width:${width}px;height:${height}px;max-width:100%;overflow:hidden`}>
    <script is:inline>
      (function(){
        window.atOptions = {
          key: '${adKey}',
          format: 'iframe',
          height: ${height},
          width: ${width},
          params: {}
        };
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = false; // importante para que lea ESTE atOptions
        s.src = '//www.highperformanceformat.com/${adKey}/invoke.js';
        (document.currentScript.parentElement || document.body).appendChild(s);
      })();
    </script>
    <noscript>
      <iframe src={`//www.highperformanceformat.com/${adKey}/invoke.js`} width={width} height={height} style="border:0;"></iframe>
    </noscript>
  </div>
</div>

<style>
  .ad-box{display:flex;justify-content:center;align-items:center;margin:16px auto;background:#0c0f12;border:1px dashed #4cf2d6;border-radius:8px}
  @media (max-width:760px){ .ad-box{border:none;background:transparent} }
</style>
